<!doctype html><html><head lang=zh-cn><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>HTML逆向生成Markdown -- Part 2 - siaikin's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="HTML逆向生成Markdown &ndash; Part 2 接上一篇HTML逆向生成Markdown &ndash; Part 1 在前文的结尾，我们已经将HTML文本处理为一个个虚拟DO"><meta property="og:image" content><meta property="og:title" content="HTML逆向生成Markdown -- Part 2"><meta property="og:description" content="HTML逆向生成Markdown &ndash; Part 2 接上一篇HTML逆向生成Markdown &ndash; Part 1 在前文的结尾，我们已经将HTML文本处理为一个个虚拟DO"><meta property="og:type" content="article"><meta property="og:url" content="https://siaikin.github.io/posts/html%E9%80%86%E5%90%91%E7%94%9F%E6%88%90markdown-part-2/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-07-25T11:21:00+00:00"><meta property="article:modified_time" content="2019-07-25T11:21:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="HTML逆向生成Markdown -- Part 2"><meta name=twitter:description content="HTML逆向生成Markdown &ndash; Part 2 接上一篇HTML逆向生成Markdown &ndash; Part 1 在前文的结尾，我们已经将HTML文本处理为一个个虚拟DO"><script src=https://siaikin.github.io/js/feather.min.js></script>
<link href=https://siaikin.github.io/css/fonts.11a1877508139eac0b5b4852ceb110c35641b3533321e66e39149e901ed5756b.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://siaikin.github.io/css/main.d902908ac6e0fab67957de5db5aea1b6455b19ae2ca98eac4c95a4a0fdc02238.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://siaikin.github.io/css/dark.c95c5dcf5f32f8b67bd36f7dab66680e068fce2b303087294114aabf7a7c080b.css disabled></head><body><div class=content><header><div class=main><a href=https://siaikin.github.io/>siaikin's Blog</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a>
| <span id=dark-mode-toggle onclick=toggleTheme()></span>
<script src=https://siaikin.github.io/js/themetoggle.js></script></nav></header><main><article><div class=title><h1 class=title>HTML逆向生成Markdown -- Part 2</h1><div class=meta>Posted on Jul 25, 2019</div></div><section class=body><h1 id=html逆向生成markdown----part-2>HTML逆向生成Markdown &ndash; Part 2</h1><p>接上一篇<a href=/2019/06/02/HTML%E9%80%86%E5%90%91%E7%94%9F%E6%88%90Markdown-Part-1/>HTML逆向生成Markdown &ndash; Part 1</a></p><p>在前文的结尾，我们已经将HTML文本处理为一个个虚拟DOM节点（JSON对象）了。</p><p>为了方便之后的处理，新增加了两个表示结束标签的节点，以方便构建DOM树。</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#76a9f9>const</span> <span style=color:#aa89ea>result</span> <span style=color:#54b1c7>=</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>           <span style=color:#8a93a5;font-style:italic>// 不要在意`type`属性，这是自定义的，42代表`h2`元素对应数字
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span><span style=color:#8a93a5;font-style:italic></span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>3</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;p&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>6</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;a&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27</span><span>        <span style=color:#aa89ea>attr</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28</span><span>            <span style=color:#aa89ea>href</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;https://www.baidu.com&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29</span><span>        <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>3</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">35</span><span>        <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;Markdown&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">36</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">37</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">38</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;a&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">39</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">40</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">41</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">42</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">43</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;p&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">44</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>6</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">45</span><span>        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">46</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">47</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><h2 id=构建虚拟dom树>构建虚拟DOM树</h2><p>我们已经用<code>position</code>属性标识了开始/结尾标签和文本节点，我们知道在开始和结束标签之间的节点都属于该节点的子节点。
以此类推，就表示出一颗DOM树了。
以上文的节点数组为输入我们来尝试构建一个虚拟DOM树。</p><ol><li>第一个是h2标签且为开始标签</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1</span><span><span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><ol start=2><li>第二个是文本节点</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>                <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><ol start=3><li>第三个是h2的结束标签，结束标签不会改变树的结构。结束标签表示之后的节点都不是该节点的子节点。（<strong>在代码层面上来说就是回退到父节点上，之后在添加节点就是添加到父节点的子节点数组中</strong>）</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>                <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><ol start=4><li>第四个是p的开始标签。因为h2已经结束了，所以p被添加到根节点上。</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>                <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;p&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>6</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><ol start=5><li>第五个是a的开始标签，因为上一个是p的开始标签，所以a被添加到p的子节点中</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>                <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;p&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>6</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;a&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20</span><span>                <span style=color:#aa89ea>attr</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21</span><span>                    <span style=color:#aa89ea>href</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;https://www.baidu.com&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22</span><span>                <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><ol start=6><li>第六个是文本节点，同理被添加到a的子节点中。</li></ol><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>                <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;p&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>6</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;a&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20</span><span>                <span style=color:#aa89ea>attr</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21</span><span>                    <span style=color:#aa89ea>href</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;https://www.baidu.com&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22</span><span>                <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23</span><span>                <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24</span><span>                    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25</span><span>                        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26</span><span>                        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27</span><span>                        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>3</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28</span><span>                        <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;Markdown&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29</span><span>                    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30</span><span>                <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><ol start=7><li>之后的两个都是结束标签，树结构也不会发生变化。</li></ol><p>最终，我们得到的是这样一个DOM树结构：</p><div class=highlight><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1</span><span><span style=color:#76a9f9>const</span>  <span style=color:#aa89ea>result</span> <span style=color:#54b1c7>=</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;h2&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>42</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9</span><span>                <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;逆向解析HTMl&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12</span><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13</span><span>    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14</span><span>        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;p&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15</span><span>        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>6</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16</span><span>        <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17</span><span>            <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18</span><span>                <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;a&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19</span><span>                <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>2</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20</span><span>                <span style=color:#aa89ea>attr</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21</span><span>                    <span style=color:#aa89ea>href</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;https://www.baidu.com&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22</span><span>                <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23</span><span>                <span style=color:#aa89ea>child</span><span style=color:#54b1c7>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24</span><span>                    <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25</span><span>                        <span style=color:#aa89ea>tag</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;textNode&#39;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26</span><span>                        <span style=color:#aa89ea>type</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>1</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27</span><span>                        <span style=color:#aa89ea>position</span><span style=color:#54b1c7>:</span> <span style=color:#d19a66>3</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28</span><span>                        <span style=color:#aa89ea>content</span><span style=color:#54b1c7>:</span> <span style=color:#98c379>&#39;Markdown&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29</span><span>                    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30</span><span>                <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31</span><span>            <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32</span><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33</span><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34</span><span><span style=color:#abb2bf>]</span>
</span></span></code></pre></div><p>到这一步，我们已经将HTML文本转化成了虚拟DOM树。最后也是最关键的一步，就是分析DOM树，根据MD规则生成MD文本了。
可以说之前的三个步骤都是为了最后一步服务的。</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/%E7%A0%94%E7%A9%B6>研究</a></li><li><a href=/tags/markdown>Markdown</a></li><li><a href=/tags/markdown%E8%A7%A3%E6%9E%90>Markdown解析</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/siaikin rel=me title=Github><i data-feather=github></i></a>
<a class=border></a><a class=soc href=abc1310054026@outlook.com rel=me title=Email><i data-feather=mail></i></a>
<a class=border></a><a class=soc href=/index.xml rel=me title=RSS><i data-feather=rss></i></a>
<a class=border></a></div><div class=footer-info>2023 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>